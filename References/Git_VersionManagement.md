# Gitでバージョン管理

it とは 一言でいうと，ディレクトリ木構造の変更履歴の同期ソフト　です．ディレクトリはフォルダでもいいです．

Gitの言葉で「 ディレクトリ木構造」をリポジトリと言います．ディレクトリの木構造とはディレクトリの中にディレクトリがあって，，，という入れ子の形のことで，
つまりは「レポジトリ」とは ，変更履歴を記憶し続ける「ディレクトリ」と考えてください．

## 0. インストール

[Git Official](https://git-scm.com/downloads)


## 1. Repository を作る

- 普通の既にある「ディレクトリ」を「レポジトリ」にするには，ディレクトリの中に変更履歴ディレクトリ（隠れディレクトリ）「`.git`」を作成します．レポジトリにしたいディレクトリを`hoge`とすると

```
git init hoge
```

もしくは，

```
cd hoge
git init
```

## 2. 変更履歴

さて，gitの特徴は変更履歴の記憶です．

### 変更履歴

変更履歴とは，

- ファイルを追加，消す．
- ファイル名が変える． 
- ファイルの中の記述が変わった．

この3つの状態の記憶です．

- 「ファイルを追加，消す」：正しくいうと，「ファイルを監視対象に追加，監視対象から外す」であって，現実的にファイルを作成したり，削除することを意味していません．

- ファイルを監視対象に追加
    ```
    git add fileA
    ```
    fileAは監視対象外でしたが，これにより監視対象に入ります．

- ファイルを監視対象から外す
    ```
    git rm fileB
    ```
    fileBは監視対象になっていたが，これにより監視対象から外れます．git rmはファイル自体を削除するわけではありません．

    現実的に監視対象のファイルを削除したいときは，
    ```
    rm fileB
    ```
    
    です．すでに現実的に消してしまったあとに，履歴上でも消したいときは，手動でgitに変更を教えなければいけません．まず，`git restore fileB` でfileBを復活させ，`git rm fileB` で監視対象から外します． 

- 「ファイル名を変える」：同様に「監視対象のファイル名を変える」です．ファイルの場所を変えるのもこの操作
    ```
    git mv fileA fileB
    ```
    gitのmvではなく，ふつうにファイル名を変えてしまうと，gitが監視対象を見失います．git restore fileAでfileAを復活させ，git rm fileAで監視対象から外して，git add fileBでリネーム後のファイルを監視対象に追加することになる気がします．

- 「ファイルの中の記述が変更された」：どんな変更でも
    ```
    git add
    ```
    です．

### 変更履歴の記録

Gitは，複数人での共同開発が前提となっています．なので，変更履歴の記録には，誰による変更なのかが記録されます．たとえ一人でしか使わなくともです．

```
$ git config --global user.name "Kotaro Sonoda" 
$ git config --global user.email sonoda@cis.nagasaki-u.ac.jp
```

変更履歴は記録するタイミングで整理されます．記録は

```
git commit
```

でその時点の変更履歴が整理されて記録されます．ファイルをaddしてrmしてaddした，その状態でcommitしたとき，結果としては1回のaddのみが記録されます．

ファイルの内容を変更した場合も，状態Xからちょっと変更して状態Yになりそれをaddして，また変更して状態Zになりそれをaddして，その状態でcommitすると，結果として状態Zと状態Xの差分が記録されます．状態Yはなかったことになります．

### 変更の巻き戻し

履歴があれば巻き戻せます．直前の状態に戻したいときは，

```
git restore fileA
```

です．大事ですね．素晴らしいですね．
